<tmpl_var header_template escape="none">

<form method="post" action="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl" enctype="multipart/form-data" name="dirform">
<input type="hidden" name="sessionid" value="<tmpl_var sessionid escape="html">">

<input type="hidden" name="folder" value="<tmpl_var folder escape="html">">
<input type="hidden" name="sort" value="<tmpl_var sort escape="html">">
<input type="hidden" name="msgdatetype" value="<tmpl_var msgdatetype escape="html">">
<input type="hidden" name="message_id" value="<tmpl_var message_id escape="html">">
<input type="hidden" name="page" value="<tmpl_var page escape="html">">
<input type="hidden" name="longpage" value="<tmpl_var longpage escape="html">">
<input type="hidden" name="searchtype" value="<tmpl_var searchtype escape="html">">
<input type="hidden" name="keyword" value="<tmpl_var keyword escape="html">">

<input type="hidden" name="currentdir" value="<tmpl_var currentdir escape="html">">
<input type="hidden" name="filesort" value="<tmpl_var filesort escape="html">">
<input type="hidden" name="gotodir" value="<tmpl_var gotodir escape="html">">
<input type="hidden" name="permission" value="">

<div id="wrapper">
	<div id="header">
		<div id="titlebar">
			<div id="lefttitle">gettext('Webdisk')</div>
			<div id="centertitle"><tmpl_if quotausage>gettext('Quota Usage:') <tmpl_var quotausage escape="html"><tmpl_if peroverquota> (<tmpl_var peroverquota>%)</tmpl_if><tmpl_else>&nbsp;</tmpl_if></div>
			<div id="righttitle"><tmpl_var dcount escape="html"> / <tmpl_var fcount escape="html"> / <tmpl_var totalsize escape="html"></div>
		</div>
		
		<ul id="navigation">
		    <li><a accesskey="G" href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=%2F&amp;wdpage=1&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" class="icon" title="gettext('go to the home directory')"><tmpl_if use_texticon>gettext('go to the home directory')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_home escape="html">" class="iconset_button" alt="gettext('go to the home directory')"></tmpl_if></a></li>

			<li><a accesskey="R" href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=userrefresh&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" class="icon" title="gettext('refresh')"><tmpl_if use_texticon>gettext('refresh')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_refresh escape="html">" class="iconset_button" alt="gettext('refresh')"></tmpl_if></a></li>

			<tmpl_if enable_webmail>
			<tmpl_if caller_main><li><a href="<tmpl_var url_cgi escape="none">/openwebmail-main.pl?action=listmessages&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;message_id=<tmpl_var message_id escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">" accesskey="M" class="icon" title="<tmpl_if is_callerfolderdefault><tmpl_if callerfoldername_INBOX>gettext('back to Inbox')</tmpl_if><tmpl_if callerfoldername_saved-messages>gettext('back to Saved folder')</tmpl_if><tmpl_if callerfoldername_sent-mail>gettext('back to Sent folder')</tmpl_if><tmpl_if callerfoldername_saved-drafts>gettext('back to Draft folder')</tmpl_if><tmpl_if callerfoldername_mail-trash>gettext('back to Trash folder')</tmpl_if><tmpl_if callerfoldername_spam-mail>gettext('back to Spam folder')</tmpl_if><tmpl_if callerfoldername_virus-mail>gettext('back to Virus folder')</tmpl_if><tmpl_else>gettext('back to <tmpl_var callerfoldername escape="html"> folder')</tmpl_if>"><tmpl_if use_texticon><tmpl_if is_callerfolderdefault><tmpl_if callerfoldername_INBOX>gettext('back to Inbox')</tmpl_if><tmpl_if callerfoldername_saved-messages>gettext('back to Saved folder')</tmpl_if><tmpl_if callerfoldername_sent-mail>gettext('back to Sent folder')</tmpl_if><tmpl_if callerfoldername_saved-drafts>gettext('back to Draft folder')</tmpl_if><tmpl_if callerfoldername_mail-trash>gettext('back to Trash folder')</tmpl_if><tmpl_if callerfoldername_spam-mail>gettext('back to Spam folder')</tmpl_if><tmpl_if callerfoldername_virus-mail>gettext('back to Virus folder')</tmpl_if><tmpl_else>gettext('back to <tmpl_var callerfoldername escape="html"> folder')</tmpl_if><tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_webmail escape="html">" class="iconset_button" alt="<tmpl_if is_callerfolderdefault><tmpl_if callerfoldername_INBOX>gettext('back to Inbox')</tmpl_if><tmpl_if callerfoldername_saved-messages>gettext('back to Saved folder')</tmpl_if><tmpl_if callerfoldername_sent-mail>gettext('back to Sent folder')</tmpl_if><tmpl_if callerfoldername_saved-drafts>gettext('back to Draft folder')</tmpl_if><tmpl_if callerfoldername_mail-trash>gettext('back to Trash folder')</tmpl_if><tmpl_if callerfoldername_spam-mail>gettext('back to Spam folder')</tmpl_if><tmpl_if callerfoldername_virus-mail>gettext('back to Virus folder')</tmpl_if><tmpl_else>gettext('back to <tmpl_var callerfoldername escape="html"> folder')</tmpl_if>"></tmpl_if></a></li></tmpl_if>

			<tmpl_if caller_read><li><a href="<tmpl_var url_cgi escape="none">/openwebmail-read.pl?action=readmessage&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;message_id=<tmpl_var message_id escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">" accesskey="B" class="icon" title="gettext('back to message reading')"><tmpl_if use_texticon>gettext('back to message reading')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_webmail escape="html">" class="iconset_button" alt="gettext('back to message reading')"></tmpl_if></a></li></tmpl_if>
			</tmpl_if>

			<tmpl_if enable_addressbook><li><a href="<tmpl_var url_cgi escape="none">/openwebmail-abook.pl?action=addrlistview&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="A" class="icon" title="gettext('addressbook')"><tmpl_if use_texticon>gettext('addressbook')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_addrbook escape="html">" class="iconset_button" alt="gettext('addressbook')"></tmpl_if></a></li></tmpl_if>

			<tmpl_if enable_calendar><li><a href="<tmpl_var url_cgi escape="none">/openwebmail-cal.pl?action=<tmpl_var calendar_defaultview escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="K" class="icon" title="gettext('calendar')"><tmpl_if use_texticon>gettext('calendar')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_webcal escape="html">" class="iconset_button" alt="gettext('calendar')"></tmpl_if></a></li></tmpl_if>

			<tmpl_if enable_sshterm><tmpl_if use_ssh2><li><a href="#" onclick="window.open('<tmpl_var url_html escape="none">/applet/mindterm2/ssh2.html', '_applet', 'width=400,height=100,top=2000,left=2000,resizable=no,menubar=no,scrollbars=no');" accesskey="T" class="icon" title="gettext('ssh terminal')"><tmpl_if use_texticon>gettext('ssh terminal')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_sshterminal escape="html">" class="iconset_button" alt="gettext('ssh terminal')"></tmpl_if></a><tmpl_else><tmpl_if use_ssh1><a href="#" onclick="window.open('<tmpl_var url_html escape="none">/applet/mindterm/ssh.html', '_applet', 'width=400,height=100,top=2000,left=2000,resizable=no,menubar=no,scrollbars=no');" accesskey="T" class="icon" title="gettext('ssh terminal')"><tmpl_if use_texticon>gettext('ssh terminal')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_sshterminal escape="html">" class="iconset_button" alt="gettext('ssh terminal')"></tmpl_if></a></li></tmpl_if></tmpl_if></tmpl_if>

			<tmpl_if enable_preference><li><a href="<tmpl_var url_cgi escape="none">/openwebmail-prefs.pl?action=editprefs&amp;prefs_caller=webdisk&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="O" class="icon" title="gettext('user preferences')"><tmpl_if use_texticon>gettext('user preferences')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_preferences escape="html">" class="iconset_button" alt="gettext('user preferences')"></tmpl_if></a></li></tmpl_if>

			<li><a href="<tmpl_var url_cgi escape="none">/openwebmail-main.pl?action=logout&amp;sessionid=<tmpl_var sessionid escape="url">" accesskey="X" class="icon" title="gettext('logout')"><tmpl_if use_texticon>gettext('logout')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_button_logout escape="html">" class="iconset_button" alt="gettext('logout')"></tmpl_if></a></li>
		</ul>
	</div> <!-- #header end -->

	<div id="content">
		<div class="paginator">
			<tmpl_if prevpage><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var prevpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=0&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="U" class="icon" title="gettext('previous page')"><tmpl_if use_texticon><tmpl_if is_right_to_left>&gt;<tmpl_else>&lt;</tmpl_if><tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowrighton escape="html"><tmpl_else><tmpl_var iconset_small_arrowlefton escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_right_to_left>&gt;<tmpl_else>&lt;</tmpl_if>"></tmpl_if></a><tmpl_else><tmpl_if use_texticon>-<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowrightoff escape="html"><tmpl_else><tmpl_var iconset_small_arrowleftoff escape="html"></tmpl_if>" class="iconset_small" title="gettext('no previous page')" alt="-"></tmpl_if></tmpl_if>
			<tmpl_var wdpage escape="html">/<tmpl_var totalpages escape="html">
			<tmpl_if nextpage><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var nextpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=0&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="D" class="icon" title="gettext('next page')"><tmpl_if use_texticon><tmpl_if is_right_to_left>&lt;<tmpl_else>&gt;</tmpl_if><tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowlefton escape="html"><tmpl_else><tmpl_var iconset_small_arrowrighton escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_right_to_left>&lt;<tmpl_else>&gt;</tmpl_if>"></tmpl_if></a><tmpl_else><tmpl_if use_texticon>-<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowleftoff escape="html"><tmpl_else><tmpl_var iconset_small_arrowrightoff escape="html"></tmpl_if>" class="iconset_small" title="gettext('no next page')" alt="-"></tmpl_if></tmpl_if>
			
			<div class="right">
				<tmpl_if enablehidden>
				<label for="showhidden">gettext('show hidden files')</label>
				<input type="checkbox" id="showhidden" name="showhidden" value="1" onclick="document.dirform.submit();" <tmpl_if showhidden> checked="checked"</tmpl_if>>
				</tmpl_if>

				<tmpl_if allowthumbnails>
				<label for="showthumbnail">gettext('show thumbnails')</label>
				<input type="checkbox" id="showthumbnail" name="showthumbnail" value="1" onclick="document.dirform.submit();" <tmpl_if showthumbnail> checked="checked"</tmpl_if>>
				</tmpl_if>

				<label for="singlepage">gettext('single page')</label>
				<input type="checkbox" id="singlepage" name="singlepage" value="1" onclick="document.dirform.submit();" <tmpl_if singlepage> checked="checked"</tmpl_if>>
			</div>
		</div>
		
		<div class="filesearchbar">
			<select name="wdsearchtype">
				<option selected="selected" value="filename">gettext('Filename')</option>
				<option value="textcontent">gettext('Text Content')</option>
			</select>
			
			<input type="text" name="wdkeyword" value="<tmpl_var wdkeyword escape="html">" size="15" accesskey="S" onchange="document.dirform.searchbutton.focus();">
			<input type="submit" name="searchbutton" value="gettext('Search')"><input type="submit" name="clearsearchbutton" value="gettext('Clear')">
			
			<div class="center">
				gettext('Page')
				<select name="wdpage" onchange="document.dirform.submit();">
					<tmpl_loop pageselectloop>
					<option value="<tmpl_var option escape="html">" <tmpl_if selected>selected</tmpl_if>><tmpl_var label escape="html"></option>
					</tmpl_loop>
				</select>
			</div>
			
			<div class="right">
				<tmpl_if canwrite><nobr><input type="file" name="upload" size="25" accesskey="W"><input type="submit" name="uploadbutton" value="gettext('Upload')" onclick="return uploadfilled();"></nobr><tmpl_else>&nbsp;</tmpl_if>
			</div>
		</div>
		
		<div class="currentfolder">
			<tmpl_if isroot>
			<a title="gettext('home directory')"><tmpl_if use_texticon>gettext('home directory')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_small_disk escape="html">" class="iconset_small" alt="gettext('home directory')"></tmpl_if></a>
			<tmpl_else>
			<a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var parentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" class="icon" title="gettext('go to parent directory')"><tmpl_if use_texticon>gettext('go to parent directory')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_var iconset_small_dirup escape="html">" class="iconset_small" alt="gettext('go to parent directory')"></tmpl_if>&nbsp;</a>
			</tmpl_if>
			
			<tmpl_if wdkeyword>gettext('Searching From Folder:')<tmpl_else>gettext('Current Folder:')</tmpl_if>&nbsp;<tmpl_loop pathloop><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var dir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">"><tmpl_var dirstr escape="html"></a></tmpl_loop>
		</div>
		
		<table class="contentbox">
			<tr class="contentboxtitle">
				<tmpl_loop headersloop>
				<tmpl_if nameheader>
				<th><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_if is_activesort><tmpl_if is_reverse>name<tmpl_else>name_rev</tmpl_if><tmpl_else>name</tmpl_if>&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="G" title="gettext('sort by filename')">gettext('Filename')<tmpl_if is_activesort>&nbsp;<tmpl_if use_texticon>gettext('sort by filename')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_reverse><tmpl_var iconset_small_arrowup escape="html"><tmpl_else><tmpl_var iconset_small_arrowdown escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_reverse>^<tmpl_else>v</tmpl_if>"></tmpl_if></tmpl_if></a></th>
				</tmpl_if>

				<tmpl_if sizeheader>
				<th><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_if is_activesort><tmpl_if is_reverse>size<tmpl_else>size_rev</tmpl_if><tmpl_else>size</tmpl_if>&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="G" title="gettext('sort by size')">gettext('Size')<tmpl_if is_activesort>&nbsp;<tmpl_if use_texticon>gettext('sort by size')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_reverse><tmpl_var iconset_small_arrowup escape="html"><tmpl_else><tmpl_var iconset_small_arrowdown escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_reverse>^<tmpl_else>v</tmpl_if>"></tmpl_if></tmpl_if></a></th>
				</tmpl_if>

				<tmpl_if timeheader>
				<th><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_if is_activesort><tmpl_if is_reverse>time<tmpl_else>time_rev</tmpl_if><tmpl_else>time</tmpl_if>&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="G" title="gettext('sort by last modified timestamp')">gettext('Last Modified')<tmpl_if is_activesort>&nbsp;<tmpl_if use_texticon>gettext('sort by last modified timestamp')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_reverse><tmpl_var iconset_small_arrowup escape="html"><tmpl_else><tmpl_var iconset_small_arrowdown escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_reverse>^<tmpl_else>v</tmpl_if>"></tmpl_if></tmpl_if></a></th>
				</tmpl_if>

				<tmpl_if permheader>
				<th><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_if is_activesort><tmpl_if is_reverse>perm<tmpl_else>perm_rev</tmpl_if><tmpl_else>perm</tmpl_if>&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="G" title="gettext('sort by permissions')">gettext('Permissions')<tmpl_if is_activesort>&nbsp;<tmpl_if use_texticon>gettext('sort by permissions')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_reverse><tmpl_var iconset_small_arrowup escape="html"><tmpl_else><tmpl_var iconset_small_arrowdown escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_reverse>^<tmpl_else>v</tmpl_if>"></tmpl_if></tmpl_if></a></th>
				</tmpl_if>
				</tmpl_loop>
				
				<th><input type="checkbox" name="allbox" value="1" onclick="checkall(<tmpl_var uselightbar escape="js">);"></th>
			</tr>
			
			<tr class="contentboxdata">
				<tmpl_if filesloop>
				<tmpl_loop filesloop>
				<tr id="tr_<tmpl_var filenumber escape="html">" <tmpl_if uselightbar>class="rowlight" onclick="if (!document.layers) { var cb = document.getElementById('<tmpl_var filenumber escape="js">'); cb.checked=!cb.checked }" onmouseover="this.className='rowhilite';" onmouseout="this.className=document.getElementById('<tmpl_var filenumber escape="js">').checked?'rowdark':'rowlight';"</tmpl_if>>
					<td<tmpl_unless uselightbar> class="<tmpl_if odd>rowlight<tmpl_else>rowdark</tmpl_if>"</tmpl_unless>>				
						<tr>
							<tmpl_if isdir>
							<td><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" class="icon" title="gettext('owner: <tmpl_var ownerstr escape="html"> group: <tmpl_var groupstr escape="html">')" accesskey="<tmpl_var accesskeynr escape="html">"><tmpl_if ficon><tmpl_if use_texticon>gettext('file icon')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/file/<tmpl_var ficon escape="url">" class="iconset_small"></tmpl_if></tmpl_if>&nbsp;<b><tmpl_var filenamestr escape="html"><tmpl_var flinkstr escape="html"></b></a></td>
							<td align="right">
								<nobr><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">"><b>&lt;gettext('Folder')&gt;</b></a></nobr>
							</td>
							</tmpl_if>

							<tmpl_unless isdir>
							<td>
								<tmpl_if ficon>
								<a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl/<tmpl_var fname escape="url">?action=viewinline&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">" class="icon" title="gettext('owner: <tmpl_var ownerstr escape="html"> group: <tmpl_var groupstr escape="html">')" accesskey="<tmpl_var accesskeynr escape="html">" target="_blank"><tmpl_if use_texticon>gettext('file icon')<tmpl_else><img src="<tmpl_var url_html escape="none">/images/file/<tmpl_var ficon escape="url">" class="iconset_small"></tmpl_if></a>&nbsp;
								</tmpl_if>

								<tmpl_if dname>
								<a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var dname escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" class="icon" accesskey="<tmpl_var accesskeynr escape="html">"><tmpl_var dnamestr escape="html"></a>
								</tmpl_if>

								<a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl/<tmpl_var fname escape="url">?action=viewinline&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">" title="gettext('owner: <tmpl_var ownerstr escape="html"> group: <tmpl_var groupstr escape="html">')" accesskey="<tmpl_var accesskeynr escape="html">" target="_blank"><tmpl_var fnamestr escape="html"><tmpl_var flinkstr escape="html"></a>
							</td>
							<td align="right">
								<nobr>
								<tmpl_if mkpspdf><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=<tmpl_var mkpspdf escape="url">&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var wdpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=<tmpl_var singlepage escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">"<tmpl_if mkps><tmpl_if withconfirm> onclick="return confirm('jgettext('Make a postscript file from <tmpl_var filename escape="js">?')');"</tmpl_if>>[gettext('make postscript')]<tmpl_else><tmpl_if withconfirm> onclick="return confirm('jgettext('Make a pdf file from <tmpl_var filename escape="js">?')');"</tmpl_if>>[gettext('make pdf')]</tmpl_if></a></tmpl_if>

								<tmpl_if preview><a href="javascript:void(0);" onclick="window.open('<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=preview&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">','_previewfile','width=780,height=550,scrollbars=yes,resizable=yes,location=no');">&nbsp;[gettext('preview')]</a></tmpl_if>

								<tmpl_if editfile><a href="javascript:void(0);" onclick="window.open('<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=editfile&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">','_editfile','width=780,height=550,scrollbars=yes,resizable=yes,location=no');">&nbsp;[gettext('edit')]</a></tmpl_if>

								<tmpl_if listarchive><a href="javascript:void(0);" onclick="window.open('<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=listarchive&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">','_editfile','width=780,height=550,scrollbars=yes,resizable=yes,location=no');">&nbsp;[gettext('list archive')]</a></tmpl_if>

								<tmpl_if wordpreview><a href="javascript:void(0);" onclick="window.open('<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=wordpreview&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">','_wordpreview','width=780,height=550,scrollbars=yes,resizable=yes,location=no');">[gettext('preview')]</a></tmpl_if>

								<tmpl_if candeflate><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=extractarchive&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">" <tmpl_if withconfirm> onclick="return confirm('jgettext('Extract archive file <tmpl_var filename escape="js">?')');"</tmpl_if>>&nbsp;[gettext('extract')]</a></tmpl_if>

								<tmpl_if thumbnail><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl/<tmpl_var fname escape="url">?action=viewinline&amp;selitems=<tmpl_var filename escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">" class="icon" target="_blank"><img src="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=viewinline&amp;selitems=<tmpl_var thumbnail escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;sessionid=<tmpl_var sessionid escape="url">"></a></tmpl_if>
								</nobr>
							</td>
							</tmpl_unless>
						</tr>
					</td>
					<td<tmpl_unless uselightbar> class="<tmpl_if odd>rowlight<tmpl_else>rowdark</tmpl_if>"</tmpl_unless> align="right"><a title="<tmpl_var fsize escape="html">"><tmpl_var fsizestr escape="html"></a></td>
					<td<tmpl_unless uselightbar> class="<tmpl_if odd>rowlight<tmpl_else>rowdark</tmpl_if>"</tmpl_unless> align="center"><tmpl_var datestr escape="html"></td>
					<td<tmpl_unless uselightbar> class="<tmpl_if odd>rowlight<tmpl_else>rowdark</tmpl_if>"</tmpl_unless> align="center"><a title="<tmpl_var fmode escape="html">"><tmpl_var fperm escape="html"></a></td>
					<td<tmpl_unless uselightbar> class="<tmpl_if odd>rowlight<tmpl_else>rowdark</tmpl_if>"</tmpl_unless> align="center"><input type="checkbox" name="selitems" value="<tmpl_var filename escape="html">" id="<tmpl_var filenumber escape="html">"<tmpl_if uselightbar> onclick="if (!document.layers) {this.checked=!this.checked}"</tmpl_if>><input type="hidden" name="p_<tmpl_var filenumber escape="html">" id="p_<tmpl_var filenumber escape="html">" value="<tmpl_var filenamestr escape="html">"></td>
				</tr>
				</tmpl_loop>
				<tmpl_else>
				<tr>
					<td class="rowlight" align="center" colspan="5">gettext('No files or directories found')</td>
				</tr>
				</tmpl_if>
			</tr>
		</table>
		
		<div class="paginator">
			<tmpl_if prevpage><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var prevpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=0&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="U" class="icon" title="gettext('previous page')"><tmpl_if use_texticon><tmpl_if is_right_to_left>&gt;<tmpl_else>&lt;</tmpl_if><tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowrighton escape="html"><tmpl_else><tmpl_var iconset_small_arrowlefton escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_right_to_left>&gt;<tmpl_else>&lt;</tmpl_if>"></tmpl_if></a><tmpl_else><tmpl_if use_texticon>-<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowrightoff escape="html"><tmpl_else><tmpl_var iconset_small_arrowleftoff escape="html"></tmpl_if>" class="iconset_small" title="gettext('no previous page')" alt="-"></tmpl_if></tmpl_if>
			<tmpl_var wdpage escape="html">/<tmpl_var totalpages escape="html">
			<tmpl_if nextpage><a href="<tmpl_var url_cgi escape="none">/openwebmail-webdisk.pl?action=showdir&amp;gotodir=<tmpl_var currentdir escape="url">&amp;wdpage=<tmpl_var nextpage escape="url">&amp;wdkeyword=<tmpl_var wdkeyword escape="url">&amp;wdsearchtype=<tmpl_var wdsearchtype escape="url">&amp;currentdir=<tmpl_var currentdir escape="url">&amp;filesort=<tmpl_var filesort escape="url">&amp;showthumbnail=<tmpl_var showthumbnail escape="url">&amp;showhidden=<tmpl_var showhidden escape="url">&amp;singlepage=0&amp;sessionid=<tmpl_var sessionid escape="url">&amp;folder=<tmpl_var folder escape="url">&amp;sort=<tmpl_var sort escape="url">&amp;msgdatetype=<tmpl_var msgdatetype escape="url">&amp;page=<tmpl_var page escape="url">&amp;longpage=<tmpl_var longpage escape="url">&amp;searchtype=<tmpl_var searchtype escape="url">&amp;keyword=<tmpl_var keyword escape="url">&amp;message_id=<tmpl_var message_id escape="url">" accesskey="D" class="icon" title="gettext('next page')"><tmpl_if use_texticon><tmpl_if is_right_to_left>&lt;<tmpl_else>&gt;</tmpl_if><tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowlefton escape="html"><tmpl_else><tmpl_var iconset_small_arrowrighton escape="html"></tmpl_if>" class="iconset_small" alt="<tmpl_if is_right_to_left>&lt;<tmpl_else>&gt;</tmpl_if>"></tmpl_if></a><tmpl_else><tmpl_if use_texticon>-<tmpl_else><img src="<tmpl_var url_html escape="none">/images/iconsets/<tmpl_var iconset escape="html">/<tmpl_if is_right_to_left><tmpl_var iconset_small_arrowleftoff escape="html"><tmpl_else><tmpl_var iconset_small_arrowrightoff escape="html"></tmpl_if>" class="iconset_small" title="gettext('no next page')" alt="-"></tmpl_if></tmpl_if>
		</div>
		
		<div class="contentbox" id="webdisk_actions">
			<div class="contentboxtitle">gettext('Actions')</div>
			
			<div class="contentboxdata">
				gettext('Target:')&nbsp;<input type="text" name="destname" size="35" accesskey="N"><br />
				
				<nobr>
				<tmpl_if canwrite>
				<input type="submit" name="newfilebutton" value="gettext('new file')" accesskey="F" onclick="if (document.dirform.destname.value == '') { alert('jgettext('Please provide a target name for the new file.')'); return false; }">
				<input type="submit" name="mkdirbutton" value="gettext('new folder')" accesskey="M" onclick="if (document.dirform.destname.value == '') { alert('jgettext('Please provide a target name for the new folder.')'); return false; }">
				</tmpl_if>

				<tmpl_unless is_readonly>
				<tmpl_if underquota>
				<input type="submit" name="copybutton" value="gettext('copy')" accesskey="C" onclick="return(has_selection() && has_target('copy') && opconfirm('copy', 1));">
				<input type="submit" name="movebutton" value="gettext('move')" accesskey="V" onclick="return(has_selection() && has_target('move') && opconfirm('move', 1));">
				</tmpl_if>
				<input type="submit" name="deletebutton" value="gettext('delete')" accesskey="Y" onclick="return (has_selection() && opconfirm('delete', 1));">
				</tmpl_unless>
				<input type="submit" name="downloadbutton" value="gettext('download')" accesskey="L" onclick="return has_selection();">
				</nobr>
				
				<br />
				
				<tmpl_if canwrite>
				<tmpl_if canzip>
				<input type="submit" name="mkzipbutton" value="gettext('zip')" accesskey="Z" onclick="return(has_selection() && has_target('mkzip') && opconfirm('mkzip', 1));">
				</tmpl_if>
				<tmpl_if cangzip>
				<input type="submit" name="gzipbutton" value="gettext('gzip')" accesskey="Z" onclick="return(has_selection() && opconfirm('gzip', 1));">
				</tmpl_if>
				<tmpl_if cantargz>
				<input type="submit" name="mktgzbutton" value="gettext('tgz')" accesskey="Z" onclick="return(has_selection() && has_target('mktgz') && opconfirm('mktgz', 1));"><tmpl_else><tmpl_if cantar><input type="submit" name="mktgzbutton" value="gettext('tar')" accesskey="Z" onclick="return(has_selection() && has_target('mktar') && opconfirm('mktar', 1));"></tmpl_if>
				</tmpl_if>
				</tmpl_if>

				<tmpl_unless is_readonly>
				<tmpl_if cansymlink>
				<input type="submit" name="symlinkbutton" value="gettext('symlink')" accesskey="N" onclick="return(has_selection() && has_target('symlink') && opconfirm('symlink', 1));">
				</tmpl_if>
				<tmpl_if canchmod>
				<input type="submit" name="chmodbutton" value="gettext('chmod')" accesskey="O" onclick="return (has_selection() && chmodinput());">
				</tmpl_if>
				</tmpl_unless>

				<tmpl_if canwrite>
				<tmpl_if canthumb>
				  <input type="submit" name="mkthumbnailbutton" value="gettext('make thumbnails')" accesskey="Z" onclick="return(has_selection() && opconfirm('mkthumb', 1));">
				</tmpl_if>
				</tmpl_if>				
			</div>
		</div>
		
		<div class="contentbox">
			<div class="contentboxtitle">gettext('Action Messages')</div>
			
			<div class="contentboxdata">
				<textarea name="msg" rows="6" cols="78" wrap="hard"><tmpl_var msg escape="html"></textarea>
			</div>
		</div>
		
		</form>
	</div> <!-- #content end -->

	<script type="text/javascript" src="<tmpl_var url_html escape="none">/javascript/popup_message.js"></script>

	<script type="text/javascript">
	<!--
	function checkall(setbgcolor) {
	   for (var i=0;i<document.dirform.elements.length;i++) {
		  var e = document.dirform.elements[i];
		  if (e.type == 'checkbox' &&
			  e.name != 'showthumbnail' &&
			  e.name != 'showhidden' &&
			  e.name != 'singlepage' &&
			  e.name != 'allbox') {
			 e.checked = document.dirform.allbox.checked;
			 if (!document.layers && setbgcolor) {
				var tr = document.getElementById('tr_'+e.id);
				if (e.checked) {
				   tr.style.backgroundColor="#DDDDDD";
				} else {
				   tr.style.backgroundColor="#EEEEEE";
				}
			 }
		  }
	   }
	}

	function has_selection() {
	   for (var i = 0; i < document.dirform.elements.length; i++) {
		  var e = document.dirform.elements[i];
		  if (
				e.type == 'checkbox'
				&& e.name != 'showthumbnail'
				&& e.name != 'showhidden'
				&& e.name != 'singlepage'
				&& e.name != 'allbox'
				&& e.checked == 1
			 ) {
			 return true;
		  }
	   }

	   alert('jgettext('There are no files or directories selected.')');

	   return false;
	}

	function has_target(op) {
	   // return true if the target field has a value
	   // otherwise alert and return false
	   if (document.dirform.destname.value == '') {
		  if (op == 'copy') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else if (op == 'move') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else if (op == 'mkzip') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else if (op == 'mktgz') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else if (op == 'mktar') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else if (op == 'symlink') {
			 alert('jgettext('Please provide a destination target name.')');
		  } else {
			 alert('jgettext('System error - the operation is not defined.')');
		  }

		  return false;
	   }

	   return true;
	}

	function opconfirm(op, do_confirm) {
	   if (do_confirm) {
		  if (op == 'copy') {
			 return confirm('jgettext('Copy the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'move') {
			 return confirm('jgettext('Move the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'delete') {
			 return confirm('jgettext('Delete the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'mkzip') {
			 return confirm('jgettext('Zip the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'gzip') {
			 return confirm('jgettext('Gzip the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'mktgz') {
			 return confirm('jgettext('Tgz the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'mktar') {
			 return confirm('jgettext('Tar the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'symlink') {
			 return confirm('jgettext('Symlink the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else if (op == 'mkthumb') {
			 return confirm('jgettext('Make thumbnails from the selected item(s)?')\n( ' + selectedstr() + ' )');
		  } else {
			 alert('jgettext('System error - the operation is not defined.')');
			 return false;
		  }
	   }

	   return true;
	}

	function selectedstr() {
	   var str = '';
	   for (var i = 0; i < document.dirform.elements.length; i++) {
		  var e = document.dirform.elements[i];
		  if (
				e.type == 'checkbox'
				&& e.name != 'showthumbnail'
				&& e.name != 'showhidden'
				&& e.name != 'singlepage'
				&& e.name != 'allbox'
				&& e.checked == 1
			 ) {
			 var p = document.getElementById('p_' + e.id);

			 if (str == '') {
				str = p.value;
			 } else {
				str = str + ', ' + p.value;
			 }
		  }
	   }

	   return str;
	}

	function uploadfilled() {
	   if (document.dirform.upload.value == '') {
		  alert('jgettext('Please choose a file to upload first.')');
		  return false;
	   } else {
		  document.dirform.msg.value = 'Uploading file '+document.dirform.upload.value+', please wait...';
		  return true;
	   }
	}

	function chmodinput() {
	   var oldperm = document.dirform.permission.value;
	   var newperm = '';
	   newperm = prompt(jgettext("'Please enter the desired permissions for selected items:\n( ' + selectedstr() + ' )\n\nPermission examples:\n0755 for shared directories, 0644 for shared files\n0700 for private directories, 0600 for private files'"), oldperm);
	   if (newperm == oldperm || newperm == null) {
		  return false;
	   } else {
		  document.dirform.permission.value = newperm;
		  return true;
	   }
	}

	<tmpl_if popup_quotadellimit>
	popup_message('<tmpl_var charset escape="js">', 'jgettext('QUOTA HIT')', '<span class="warning">jgettext('Warning: the quota limit(<tmpl_var quotalimit escape="js"> kB) was hit. Some files from the webdisk have been automatically removed.')</span>', 'jgettext('close')', '_quotahit_del', 400, 100, 60);
	</tmpl_if>
	//-->
	</script>

<tmpl_var footer_template escape="none">